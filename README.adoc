= Evidence Graph for Investigative Journalism
image:https://img.shields.io/badge/license-PMPL--1.0-blue.svg[License,link="https://github.com/hyperpolymath/palimpsest-license"]
image:https://img.shields.io/badge/Philosophy-Palimpsest-purple.svg[Palimpsest,link="https://github.com/hyperpolymath/palimpsest-licence"]


> Infrastructure for pragmatic epistemology. Combining i-docs navigation, PROMPT epistemological scoring, and boundary objects theory.

*Status:* Phase 1 (PoC) - Month 1 Complete
*Version:* 0.1.0

== New Here? Start with the Wiki

[TIP]
====
*Confused by the terminology?* The link:wiki/index.adoc[Binary-Origami Wiki] explains everything in metaphors, diagrams, and plain language.
====

[quote, Jonathan Jewell]
____
This isn't just a database. It's *infrastructure for folding and unfolding evidence*â€”so everyone can see the shape that fits their needs.
____

=== Why "Binary-Origami"?

* *Binary*: Evidence is stored as clear, connected data (supports/contradicts, 0-100 scores)
* *Origami*: The same evidence can be "folded" into different forms for different audiences
* *Figuration*: The rules for folding/unfolding are transparent and reversible

[cols="1,2,1"]
|===
| Concept | Description | Learn More

| i-docs Navigation
| "Choose Your Own Adventure" for evidence
| link:wiki/navigation.adoc[Wiki]

| PROMPT Scoring
| "Nutrition labels" for trustworthiness
| link:wiki/prompt.adoc[Wiki]

| Boundary Objects
| "Shared maps" with multiple routes
| link:wiki/boundary-objects.adoc[Wiki]

| Evidence Graphs
| The "skeleton" beneath the origami
| link:wiki/graphs.adoc[Wiki]
|===

=== For the Impatient

1. Try the <<quick-start,Quick Start>> to see it in action
2. Skim the link:wiki/binary-origami.adoc[Binary-Origami Metaphor] page
3. Dive into the link:wiki/faqs.adoc[FAQ] if something's unclear

== Vision

We didn't fall from Truth to Post-Truth; we evolved to complex epistemology without building infrastructure. *This system IS that infrastructure.*

=== Core Concepts

1. *i-docs Navigation*: Navigation over narration, reader agency
2. *PROMPT Framework*: 6-dimensional epistemological scoring (Provenance, Replicability, Objective, Methodology, Publication, Transparency)
3. *Boundary Objects*: Multiple audience perspectives on same evidence
4. Evidence Graph for Investigative Journalism amd Related Disciplines

[[quick-start]]
== Quick Start

=== Prerequisites

- *Elixir 1.16+* & *Erlang/OTP 26+*
- *Phoenix 1.7+*
- *Docker* or *Podman*
- *Node.js 20+* (for assets)

=== 1. Clone Repository

```bash
git clone https://github.com/Hyperpolymath/bofig.git
cd bofig
```

=== 2. Start Databases

*Using Docker Compose:*
```bash
docker-compose up -d
```

*Using Podman:* See [Podmanfile.md](Podmanfile.md)

Verify ArangoDB is running: http://localhost:8529 (root/dev)

=== 3. Install Dependencies

```bash
= Elixir dependencies

mix deps.get
mix deps.compile

= Frontend assets

cd assets && npm install && cd ..
```

=== 4. Setup Database

```bash
= Create PostgreSQL database (for user auth)

mix ecto.create

= Setup ArangoDB collections and indexes

iex -S mix
iex> EvidenceGraph.ArangoDB.setup_database()

= Load UK Inflation 2023 test data

mix run priv/repo/seeds.exs
```

=== 5. Start Phoenix Server

```bash
mix phx.server
```

Visit:
- *GraphQL Playground*: http://localhost:4000/api/graphiql
- *LiveDashboard*: http://localhost:4000/dev/dashboard

== GraphQL API Examples

=== Query: Get All Claims

```graphql
query {
  claims(investigationId: "uk_inflation_2023") {
    id
    text
    claimType
    confidenceLevel
    promptScores {
      provenance
      replicability
      objective
      methodology
      publication
      transparency
      overall
    }
    supportingEvidence {
      evidence {
        title
        evidenceType
      }
      weight
      confidence
    }
  }
}
```

=== Query: Evidence Chain (Graph Traversal)

```graphql
query {
  evidenceChain(claimId: "claim_1", maxDepth: 3) {
    rootClaim {
      text
    }
    nodes {
      ... on Claim {
        id
        text
      }
      ... on Evidence {
        id
        title
      }
    }
    edges {
      relationshipType
      weight
      confidence
    }
    maxDepth
  }
}
```

=== Mutation: Create Claim

```graphql
mutation {
  createClaim(input: {
    investigationId: "uk_inflation_2023"
    text: "Inflation disproportionately affected renters"
    claimType: SUPPORTING
    confidenceLevel: 0.85
    promptScores: {
      provenance: 70
      replicability: 65
      objective: 75
      methodology: 70
      publication: 65
      transparency: 70
    }
  }) {
    id
    text
    promptScores {
      overall
    }
  }
}
```

=== Mutation: Import from Zotero

```graphql
mutation {
  importFromZotero(
    investigationId: "uk_inflation_2023"
    zoteroJson: {
      key: "ABC123"
      itemType: "journalArticle"
      title: "New Economic Study"
      url: "https://doi.org/10.1111/example"
      creators: [{name: "Smith, J."}]
      tags: [{tag: "economics"}]
    }
  ) {
    id
    title
    zoteroKey
  }
}
```

=== Query: Navigation Paths

```graphql
query {
  navigationPaths(
    investigationId: "uk_inflation_2023"
    audienceType: RESEARCHER
  ) {
    id
    name
    description
    pathNodes {
      entityId
      entityType
      order
      context
    }
  }
}
```

=== Mutation: Auto-Generate Navigation Path

```graphql
mutation {
  autoGeneratePath(
    investigationId: "uk_inflation_2023"
    audienceType: SKEPTIC
  ) {
    id
    name
    pathNodes {
      entityId
      order
    }
  }
}
```

== Project Structure

```
bofig/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ evidence_graph/           # Core business logic
â”‚   â”‚   â”œâ”€â”€ claims/                # Claims context
â”‚   â”‚   â”‚   â””â”€â”€ claim.ex
â”‚   â”‚   â”œâ”€â”€ evidence/              # Evidence context
â”‚   â”‚   â”‚   â””â”€â”€ evidence.ex
â”‚   â”‚   â”œâ”€â”€ relationships/         # Graph edges
â”‚   â”‚   â”‚   â””â”€â”€ relationship.ex
â”‚   â”‚   â”œâ”€â”€ navigation/            # Audience paths
â”‚   â”‚   â”‚   â””â”€â”€ path.ex
â”‚   â”‚   â”œâ”€â”€ arango.ex              # ArangoDB client
â”‚   â”‚   â”œâ”€â”€ prompt_scores.ex       # PROMPT scoring
â”‚   â”‚   â””â”€â”€ application.ex         # OTP supervisor
â”‚   â””â”€â”€ evidence_graph_web/        # Phoenix web layer
â”‚       â”œâ”€â”€ schema/                # GraphQL schema
â”‚       â”‚   â”œâ”€â”€ types/             # Type definitions
â”‚       â”‚   â””â”€â”€ schema.ex          # Root schema
â”‚       â”œâ”€â”€ endpoint.ex
â”‚       â””â”€â”€ router.ex
â”œâ”€â”€ priv/repo/
â”‚   â””â”€â”€ seeds.exs                  # UK Inflation 2023 test data
â”œâ”€â”€ config/                        # Environment configs
â”œâ”€â”€ docs/                          # Architecture docs
â”‚   â”œâ”€â”€ database-evaluation.md
â”‚   â””â”€â”€ zotero-integration.md
â”œâ”€â”€ ARCHITECTURE.md                # Data model, API design
â”œâ”€â”€ ROADMAP.md                     # 18-month plan
â”œâ”€â”€ CLAUDE.md                      # AI assistant context
â””â”€â”€ docker-compose.yml             # Container setup
```

== UK Inflation 2023 Test Dataset

The seed data includes a complete investigation:

- *7 Claims* (primary, supporting, counter)
- *10 Evidence items* (expand to 30)
  - Official statistics: ONS CPI, Ofgem, BoE
  - Academic: Peer-reviewed studies
  - Think tanks: Resolution Foundation, IFS
  - Interviews: Expert opinions
- *10 Relationships* (supports/contradicts/contextualizes)
- *3 Navigation Paths*:
  1. *Researcher*: Evidence-first, methodology priority
  2. *Policymaker*: Authoritative sources, recommendations
  3. *Affected Person*: Personal impact, clarity

=== PROMPT Score Examples

| Evidence | Prov | Repl | Obj | Meth | Pub | Trans | Overall |
|----------|------|------|-----|------|-----|-------|---------|
| ONS CPI Data | 100 | 100 | 95 | 95 | 100 | 95 | *97.5* |
| Academic Study | 85 | 80 | 75 | 85 | 90 | 75 | *81.8* |
| Think Tank Report | 75 | 70 | 65 | 75 | 80 | 70 | *72.3* |
| Expert Interview | 85 | 45 | 60 | 50 | 40 | 75 | *59.0* |

== Development

=== Run Tests

```bash
mix test
```

=== Interactive Shell

```bash
iex -S mix phx.server

= Query ArangoDB directly

iex> EvidenceGraph.ArangoDB.query("FOR c IN claims RETURN c")

= Get a claim

iex> EvidenceGraph.Claims.get_claim("claim_1")

= Evidence chain traversal

iex> EvidenceGraph.Relationships.evidence_chain("claim_1", 3)
```

=== Code Quality

```bash
= Format code

mix format

= Static analysis

mix credo

= Type checking

mix dialyzer
```

== Deployment (Phase 2)

- *Hosting*: Hetzner Cloud (EU data sovereignty)
- *ArangoDB*: ArangoDB Oasis (â‚¬45/month)
- *Phoenix*: Systemd service, Nginx reverse proxy
- *CI/CD*: GitHub Actions

== Documentation

=== Conceptual (Start Here!)

- link:wiki/index.adoc[Binary-Origami Wiki] - Explains the metaphor and concepts in plain language
- link:wiki/binary-origami.adoc[The Metaphor] - Why "Binary-Origami Figuration"?
- link:wiki/folding-101.adoc[Folding 101] - Hands-on tutorial
- link:wiki/faqs.adoc[FAQ] - Common questions answered
- link:wiki/glossary.adoc[Glossary] - Term definitions

=== Technical

- link:ARCHITECTURE.md[ARCHITECTURE.md] - Data model, database design, API specs
- link:ROADMAP.md[ROADMAP.md] - 18-month implementation plan
- link:docs/database-evaluation.md[docs/database-evaluation.md] - ArangoDB comparison
- link:docs/zotero-integration.md[docs/zotero-integration.md] - Two-way sync design
- link:CLAUDE.md[CLAUDE.md] - AI assistant context

== Key Features

=== Implemented (Phase 1 Month 1)

- âœ… Multi-model ArangoDB integration (document + graph)
- âœ… GraphQL API with Absinthe (15 queries, 11 mutations)
- âœ… PROMPT epistemological scoring (6 dimensions, audience weighting)
- âœ… Claims, Evidence, Relationships data models
- âœ… Navigation Paths (boundary objects concept)
- âœ… Graph traversal algorithms (evidence chains, shortest path)
- âœ… Zotero metadata mapping (Dublin Core, Schema.org)
- âœ… UK Inflation 2023 test dataset
- âœ… Auto-generate navigation paths

=== Coming Next (Phase 1 Month 2-6)

- ðŸš§ Zotero browser extension (import/export)
- ðŸš§ D3.js graph visualization
- ðŸš§ Phoenix LiveView UI
- ðŸš§ PROMPT scoring interface
- ðŸš§ User authentication
- ðŸš§ Real-time collaboration
- ðŸš§ IPFS provenance integration

== Philosophy

This isn't just a database. It's infrastructure for *coordinating without consensus*.

Every design choice asks:
1. Does this support multiple audience perspectives?
2. Does this make epistemology measurable?
3. Does this enable navigation over narration?

== Contributing

Open source from day 1. See [ROADMAP.md](ROADMAP.md) for planned features.

*Month 3 = Decision Point*: User testing with 25 NUJ journalists determines go/no-go.

== Related Projects

* https://github.com/hyperpolymath/formdb[FormDB] - The narrative-first, reversible, audit-grade database
* https://github.com/hyperpolymath/fqldt[FQLdt] - Dependently-typed Form Query Language (compile-time proofs)
* https://github.com/hyperpolymath/formdb-studio[FormDB Studio] - Zero-friction GUI for non-technical users
* https://github.com/hyperpolymath/zotero-formdb[Zotero-FormDB] - Reference manager with PROMPT scores

== License

[To be determined]

== Contact

- *Repository*: https://github.com/Hyperpolymath/bofig
- *Issues*: https://github.com/Hyperpolymath/bofig/issues
- *User Testing*: NUJ network (Month 3, 6, 12)

---

*Built with:* Elixir, Phoenix, ArangoDB, Absinthe, LiveView, D3.js

*Inspired by:* i-docs (PMPL-1.0 Open Doc Lab), Boundary Objects (Star & Griesemer), Pragmatic Epistemology

*Last Updated:* 2025-11-22
